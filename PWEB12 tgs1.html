<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Travel Igasar Pindad Bandung</title>
    <style>
        body {
            margin: 30px;
        }
        table {
            margin: auto;
        }
        td, th {
            padding: 6px 10px;
        }
        input[type="text"], select {
            width: 150px;
        }
        .judul {
            text-align: center;
            font-size: 20px;
            font-weight: bold;
        }
        .btn {
            padding: 6px 12px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
<form name="fform">
    <table border="1" width="100%">
        <tr>
            <th colspan="2">
                <table border="1" >
                    <tr>
                        <th><img src="LOGO IGASAR.png" width="60"></th>
                        <th><span class="judul">Travel Igasar Pindad Bandung</span></th>
                    </tr>
                </table>
            </th>
        </tr>
        <tr>
            <td>
                <table border="1" >
                    <tr><th colspan="3">Data Penumpang</th></tr>
                    <tr>
                        <td>Nama</td><td>:</td>
                        <td><input type="text" name="nama"></td>
                    </tr>
                    <tr>
                        <td>Tujuan</td><td>:</td>
                        <td>
                            <select name="tujuan">
                        
                                <option value="Jogjakarta">Jogjakarta</option>
                                <option value="Surabaya">Surabaya</option>
                                <option value="Semarang">Semarang</option>
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>Jumlah Tiket</td><td>:</td>
                        <td><input type="text" name="jumlah"></td>
                    </tr>
                    <tr>
                        <td>Member</td><td>:</td>
                        <td>
                            <input type="radio" name="member" value="Gold">Gold
                            <input type="radio" name="member" value="Silver">Silver
                            <input type="radio" name="member" value="Bukan">Bukan Member
                        </td>
                    </tr>
                </table>
            </td>

            <td>
                <table border="1" >
                    <tr><th colspan="3">Data Pembayaran</th></tr>
                    <tr>
                        <td>Harga Tiket</td><td>:</td>
                        <td><input type="text" name="harga" readonly></td>
                    </tr>
                    <tr>
                        <td>Sub Total</td><td>:</td>
                        <td><input type="text" name="subtotal" readonly></td>
                    </tr>
                    <tr>
                        <td>Diskon</td><td>:</td>
                        <td><input type="text" name="diskon" readonly></td>
                    </tr>
                    <tr>
                        <td>Total Bayar</td><td>:</td>
                        <td><input type="text" name="total" readonly></td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td colspan="2" align="center">
                <input type="button" value="Hitung" onclick="hitung()">
                <input type="button" value="Bayar" onclick="bayar()">
                <input type="reset" value="Ulang">
            </td>
        </tr>
    </table>
</form>
<script>
function hitung() {
    var f = document.fform;
    var tujuan = f.tujuan.value;
    var jumlah = parseInt(f.jumlah.value);
    var harga = 0;

    if (tujuan == "Jogjakarta") harga = 400000;
    else if (tujuan == "Surabaya") harga = 540000;
    else if (tujuan == "Semarang") harga = 500000;

    var subtotal = harga * jumlah;

    var diskon = 0;
    for (var i = 0; i < f.member.length; i++) {
        if (f.member[i].checked) {
            if (f.member[i].value == "Gold") diskon = subtotal * 0.20;
            else if (f.member[i].value == "Silver") diskon = subtotal * 0.10;
            else diskon = 0;
        }
    }
    var total = subtotal - diskon;
    f.harga.value = harga;
    f.subtotal.value = subtotal;
    f.diskon.value = diskon;
    f.total.value = total;
}
function bayar() {
    var f = document.fform;
    var nama = f.nama.value;
    var tujuan = f.tujuan.value;
    var jumlah = f.jumlah.value;
    var member = document.querySelector('input[name="member"]:checked')?.value || "Bukan";
    var harga = f.harga.value;
    var subtotal = f.subtotal.value;
    var diskon = f.diskon.value;
    var total = f.total.value;

    var uang = parseFloat(prompt("Masukkan uang: "));
    if (uang < total) {
        alert("Uangnya kurang ");
        return;
    }
    var kembali = uang - total;

    window.open("Bukti.html?nama=" + encodeURIComponent(nama) +
        "&tujuan=" + encodeURIComponent(tujuan) +
        "&jumlah=" + encodeURIComponent(jumlah) +
        "&member=" + encodeURIComponent(member) +
        "&harga=" + encodeURIComponent(harga) +
        "&subtotal=" + encodeURIComponent(subtotal) +
        "&diskon=" + encodeURIComponent(diskon) +
        "&total=" + encodeURIComponent(total) +
        "&bayar=" + encodeURIComponent(uang) +
        "&kembali=" + encodeURIComponent(kembali)
    );

}
</script>
</body>
</html>